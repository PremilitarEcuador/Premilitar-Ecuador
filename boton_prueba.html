<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enlace de Verificación</title>
</head>
<body>
    <a id="v" href="#" target="_blank">
        <button style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 16px;">
            Verificar Código
        </button>
    </a>
    <script>
        (function(){
            var _0x81b4=["addEventListener","click","preventDefault","setItem","referer","href"];
            document.getElementById('v').addEventListener(_0x81b4[1],function(e){
                e[_0x81b4[2]](); // Prevenir acción predeterminada
                
                // Asegurarse que localStorage está disponible
                if (typeof(Storage) !== "undefined") {
                    // Guardar la URL actual en localStorage
                    localStorage.setItem('referer', window.location.href);
                    // Verificar si se guardó correctamente
                    console.log("Valor guardado en localStorage: ", localStorage.getItem('referer'));
                    
                    // Agregar un pequeño retraso para dar tiempo a la escritura en localStorage
                    setTimeout(function(){
                        // Redirigir a la URL de verificación después de guardar en localStorage
                        window.location.href = "http://localhost:8080/verificacion_institucion?codigo=M8pMnjyvgwklawU4ArJlAA==-1697";
                    }, 200); // 200ms de retraso
                } else {
                    console.log("localStorage no está disponible en este navegador.");
                }
            });
        })();
    </script>
</body>
</html>
